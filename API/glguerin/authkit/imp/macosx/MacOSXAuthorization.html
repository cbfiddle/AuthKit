<!-- Automatically generated with polardoc Version 1.0.7 on Sun Aug 10 12:16:12 MST 2003 --><!-- glguerin.authkit.imp.macosx.MacOSXAuthorization | Do not remove or edit this line! --><HTML><HEAD><TITLE>  Class glguerin.authkit.imp.macosx.MacOSXAuthorization</TITLE></HEAD><BODY BGCOLOR="#FFFFFF" LINK="#0000FF" VLINK="#0000FF" ALINK="#0000FF"><A NAME="_top_"></A><PRE><A HREF="../../../../packages.html">All Packages</A>  <A HREF="../../../../Package-glguerin/authkit/imp/macosx.html">This Package</A>  <A HREF="../../../../tree.html">Class Hierarchy</A>  <A HREF="../../../../Search.html">Class Search</A>  <A HREF="../../../../AllNames.html">Index</A></PRE><HR SIZE=1 ALIGN=left WIDTH="98%"><B><FONT FACE="Arial,Helvetica" SIZE=+2>     Class glguerin.authkit.imp.macosx.MacOSXAuthorization</FONT></B><PRE>java.lang.Object   |   +----<A HREF="../../../../glguerin/authkit/Authorization.html">glguerin.authkit.Authorization</A>           |           +----glguerin.authkit.imp.macosx.MacOSXAuthorization</PRE><P><TABLE BGCOLOR="#00ccff" WIDTH=100% CELLSPACING=0 CELLPADDING=1 BORDER=0> <TR> <TD><FONT FACE="arial,helvetica" SIZE=+1><B>&nbsp;&nbsp;Summary</B></FONT></TD> </TR> </TABLE><A NAME="_Summary_"></A><PRE>public final class  <STRONG>MacOSXAuthorization</STRONG>     extends glguerin.authkit.<A HREF="../../../../glguerin/authkit/Authorization.html">Authorization</A>{          // Constructors 1     public <A HREF="#MacOSXAuthorization()">MacOSXAuthorization</A>();          // Methods 13     public synchronized void <A HREF="#attach(byte[])">attach</A>(byte[]);     public synchronized void <A HREF="#attachPrivileged()">attachPrivileged</A>();     public void <A HREF="#authorize(glguerin.authkit.Privilege, boolean)">authorize</A>(Privilege, boolean);     public synchronized void <A HREF="#detach(boolean)">detach</A>(boolean);     public Process <A HREF="#execPrivileged(java.lang.String[])">execPrivileged</A>(String[]);     public int <A HREF="#getCapabilities()">getCapabilities</A>();     public Date <A HREF="#getPastGrantedDate(glguerin.authkit.Privilege, int)">getPastGrantedDate</A>(Privilege, int);     public Enumeration <A HREF="#getPastGrantedPrivileges()">getPastGrantedPrivileges</A>();     public synchronized byte[] <A HREF="#getSecretIdentifier()">getSecretIdentifier</A>();     public int <A HREF="#getSecretLength()">getSecretLength</A>();     public boolean <A HREF="#isAvailable(glguerin.authkit.Privilege)">isAvailable</A>(Privilege);     public Privilege <A HREF="#makeExecPrivilege(java.lang.String)">makeExecPrivilege</A>(String);     public void <A HREF="#preauthorize(glguerin.authkit.Privilege)">preauthorize</A>(Privilege);}</PRE><P><DL><P>MacOSXAuthorization is an implementation of Authorization for Mac OS X, based on the native Authorization Services API.<p> The policies and rules for MacOSXAuthorization are declared in the file <b>/etc/authorization</b> on the local host.  It is an XML file, readable by members of the admin group, but writable only by root. The policies and rules are system-wide for the local host. There are no per-user policies or rules, as far as I know.<p> The constraints on the privileged Process are largely a consequence of the Authorization Services functionality for executing a privileged process. See the getCapabilities() doc-comment for details.<h3>IMPLEMENTATION NOTES</h3> A single Authorization may be called from multiple Threads. It must therefore be inherently thread-safe. All methods that manipulate state or depend on it are implemented thread-safely. In short, multiple Threads can safely share a single MacOSXAuthorization instance. Whether your program will deadlock if it shares a MacOSXAuthorization among Threads is another question entirely, and one only you can answer.<p> The authorize(), preauthorize(), and isAvailable() methods are all synchronized on the MacOSXAuthorization.  In addition to ensuring the thread-safety of the instance's state, this also ensures that one Thread which is blocked in interactive authentication will prevent all other calling Threads from progressing until the user authenticates correctly or the authentication fails. This makes sense not only from a thread-safety perspective, but from the security perspective as well.  You don't want multiple password dialogs, but you also don't want an authentication in-progress to return indeterminate or transitory results just because it's from another thread.<p> All the native functions are static and synchronized. That is, they are synchronized on the Class object.<p> The functions are static because we don't need the instance object in the native code. All the necessary state is communicated and managed by the opaque session-token.<p> The functions are synchronized because I don't know whether the Authorization Services API is re-entrant for a process. The Auth Services API will definitely block the calling thread when interacting with the user. By acquiring the class lock before calling the native code, we ensure that Java threads will properly block before making any Auth Services API call, preventing re-entrancy issues, but possibly introducing deadlock issues. If the blocked calling thread is the AWT event-thread, this may have AWT or Swing repurcussions, which may in turn affect program responsiveness. <p> For obvious security reasons that have nothing to do with Auth Services re-entrancy, the current thread must be blocked while obtaining interactive authentication. It's the length of time that the thread could be blocked that poses a potential problem.<p> As a rule, don't call anything from the AWT event-thread that may cause user interaction, and therefore lead to long or indefinite thread blocking.<p><b> REFERENCES:</b><dl>  <dt>   On security in Mac OS X --  </dt><dd>    <a href="http://developer.apple.com/security/">Developer -- Mac OS X Security</a>    <br>Contains links to sample code, mailing-list, API and reference documentation, etc.  </dd>  <dt>   On the Authorization Services concepts and principles --  </dt><dd>    <a href="http://developer.apple.com/documentation/Security/Conceptual/authorization_concepts/index.html">    Performing Privileged Operations With Authorization Services</a>    (HTML and PDF available).  </dd>  <dt>   On the Authorization Services C API --  </dt><dd>    <a href="http://developer.apple.com/documentation/Security/Reference/authorization_ref/index.html">    Authorization Services Reference</a>    (HTML and PDF available).  </dd>  <dt>   On synchronized static native methods --  </dt><dd>   JNI Programmers's Guide & Specification: section 8.1.2, p.95    available    <a href="http://java.sun.com/docs/books/jni/html/jniTOC.html">as HTML</a>    or    <a href="../../../../ftp://ftp/javasoft/com/docs/specs/jni/pdf.html">as PDF</a>.  </dd></dl><P></DL><P><BR><BR><BR><TABLE BGCOLOR="#00ccff" WIDTH=100% CELLSPACING=0 CELLPADDING=1 BORDER=0> <TR> <TD><FONT FACE="arial,helvetica" SIZE=+1><B>&nbsp;&nbsp;Constructors</B></FONT></TD> </TR> </TABLE><TABLE WIDTH=100% CELLSPACING=0 CELLPADDING=1 BORDER=0> <TR> <TD WIDTH=80%><BR><H3><A NAME="MacOSXAuthorization"><FONT COLOR="#FFCC00">&middot;</FONT></A><A NAME="MacOSXAuthorization()">MacOSXAuthorization</A> </H3></TD> <TD ALIGN=right WIDTH=20%> <FONT SIZE="-2"><A HREF="#_Summary_">Summary</A> &nbsp;|&nbsp; <A HREF=#_top_>Top</A></FONT> </TD> </TR> </TABLE><PRE>   public MacOSXAuthorization() </PRE><BLOCKQUOTE><DL><P>Vanilla constructor.<P></DL></BLOCKQUOTE> <BR><BR><TABLE BGCOLOR="#00ccff" WIDTH=100% CELLSPACING=0 CELLPADDING=1 BORDER=0> <TR> <TD><FONT FACE="arial,helvetica" SIZE=+1><B>&nbsp;&nbsp;Methods</B></FONT></TD> </TR> </TABLE><TABLE WIDTH=100% CELLSPACING=0 CELLPADDING=1 BORDER=0> <TR> <TD WIDTH=80%><BR><H3><A NAME="getCapabilities"><FONT COLOR="#FF0000">&middot;</FONT></A><A NAME="getCapabilities()">getCapabilities</A> </H3></TD> <TD ALIGN=right WIDTH=20%> <FONT SIZE="-2"><A HREF="#_Summary_">Summary</A> &nbsp;|&nbsp; <A HREF=#_top_>Top</A></FONT> </TD> </TR> </TABLE><PRE>   public int getCapabilities() </PRE><BLOCKQUOTE><DL><P>This imp has the following notable capabilities and/or constraints:<dl>  <dt>HAS_PROCESS_COUPLED_STREAMS</dt>  <dd>   An execPrivileged() child Process has interdependent input and output streams.  </dd>  <dt>HAS_PROCESS_INPUTSTREAM</dt>  <dd>   An execPrivileged() child Process implements getInputStream().  </dd>  <dt>HAS_PROCESS_OUTPUTSTREAM</dt>  <dd>   An execPrivileged() child Process implements getOutputStream().  </dd>  <dt>HAS_PROCESS_ELEVATED</dt>  <dd>   An execPrivileged() child Process runs with an effective user-ID of root (superuser).   Its real user-ID is unaffected, as are its real and effective group-ID.  </dd>  <dt>HAS_SYNTHETIC_PREAUTH</dt>  <dd>   The preauthorize() method is exactly the same as calling   authorize() with true for interactionAllowed.   Real preauthorization is not provided.  </dd>  <dt>HAS_SESSION_MULTIPROCESS</dt>  <dd>   Secret identifiers work across process boundaries.   This makes them much more valuable as secrets.   They are still transitory, however, so are valuable only as long as the session exists.  </dd></dl><p> According to Quinn (the Eskimo!), in the "Read Me About MoreAuthSample" documentation for MoreAuthSample v1.0b2:<blockquote>		... the preauthorization flag (kAuthorizationFlagPreAuthorize)		does nothing on current versions of Mac OS X [2907852]. </blockquote> This statement coincides with my own experimental results. Earlier trials showed that trying to preauthorize a rule having timeout=0 simply did not work as Apple's documentation described. Whew, I thought it was just me.<p> The Auth-Services API function that actually executes a program as a privileged process is notable for its limitations:<ul> <li> The returned FILE * points to a bi-directional pipe, which inextricably couples stdin and stdout of the child process, so you can't close its stdin to signal EOF without also closing its stdout and thereby being unable to read results. Hence the presence of HAS_PROCESS_COUPLED_STREAMS. </li> <li> The privileged Process's stderr is simply inherited from the parent process, so it's typically just going to spew error-text onto the system console, rather than let the parent process parse it or decode error-results from it. No, that might be too useful. Hence the absence of HAS_PROCESS_ERRORSTREAM. </li> <li> There is no way to know or discover the process-ID (pid) of the privileged child Process. Who would want to know that?  After all, just because it's a required parameter for wait(), or wait4(), or kill(), who'd want to wait for the child or send it signals?  Naah. Hence the absence of HAS_PROCESS_WAITFOR, HAS_PROCESS_EXITVALUE, and HAS_PROCESS_DESTROY. </li></ul><P><DT><B>Overrides:</B><DD><A HREF="../../../../glguerin/authkit/Authorization.html#getCapabilities()">getCapabilities</A> in class <A HREF="../../../../glguerin/authkit/Authorization.html">Authorization</A></DL></BLOCKQUOTE> <BR><TABLE WIDTH=100% CELLSPACING=0 CELLPADDING=1 BORDER=0> <TR> <TD WIDTH=80%><BR><H3><A NAME="authorize"><FONT COLOR="#FF0000">&middot;</FONT></A><A NAME="authorize(glguerin.authkit.Privilege, boolean)">authorize</A> </H3></TD> <TD ALIGN=right WIDTH=20%> <FONT SIZE="-2"><A HREF="#_Summary_">Summary</A> &nbsp;|&nbsp; <A HREF=#_top_>Top</A></FONT> </TD> </TR> </TABLE><PRE>   public void authorize(<A HREF="../../../../glguerin/authkit/Privilege.html">Privilege</A> toGrant,                          boolean interactionAllowed) </PRE><BLOCKQUOTE><DL><P>Authorize the given Privilege, granting approval to exercise it immediately. If the Privilege is granted or was already available, this method returns normally. If the Privilege is not granted, an UnauthorizedException is thrown.<p> Interaction with the user is allowed or forbidden according to 'interactionAllowed'. The current thread is blocked while any user-interaction is occurring. If interaction is allowed, and the user does not authenticate properly, this method fails. If interaction is forbidden, and the privilege is not already available, this method fails.<P><DT> <B>Throws:</B> <A HREF="../../../../glguerin/authkit/UnauthorizedException.html">UnauthorizedException</A><DD> thrown when the requested Privilege is not granted.<DT> <B>Throws:</B> IllegalArgumentException<DD> thrown when the Privilege is malformed, or some other structural error occurs.<DT><B>Overrides:</B><DD><A HREF="../../../../glguerin/authkit/Authorization.html#authorize(glguerin.authkit.Privilege, boolean)">authorize</A> in class <A HREF="../../../../glguerin/authkit/Authorization.html">Authorization</A></DL></BLOCKQUOTE> <BR><TABLE WIDTH=100% CELLSPACING=0 CELLPADDING=1 BORDER=0> <TR> <TD WIDTH=80%><BR><H3><A NAME="preauthorize"><FONT COLOR="#FF0000">&middot;</FONT></A><A NAME="preauthorize(glguerin.authkit.Privilege)">preauthorize</A> </H3></TD> <TD ALIGN=right WIDTH=20%> <FONT SIZE="-2"><A HREF="#_Summary_">Summary</A> &nbsp;|&nbsp; <A HREF=#_top_>Top</A></FONT> </TD> </TR> </TABLE><PRE>   public void preauthorize(<A HREF="../../../../glguerin/authkit/Privilege.html">Privilege</A> toGrant) </PRE><BLOCKQUOTE><DL><P>This method is a synthetic implementation. It simply calls authorize(), since the PREAUTH option-flag isn't distinguished as of Mac OS X v10.2.*. Since this isn't a real preauthorize(), getCapabilities() returns a bit-mask value containing HAS_SYNTHETIC_PREAUTH.<P><DT> <B>Throws:</B> <A HREF="../../../../glguerin/authkit/UnauthorizedException.html">UnauthorizedException</A><DD> thrown when the requested Privilege is not granted.<DT> <B>Throws:</B> IllegalArgumentException<DD> thrown when the Privilege is malformed, or some other structural error occurs.<DT><B>Overrides:</B><DD><A HREF="../../../../glguerin/authkit/Authorization.html#preauthorize(glguerin.authkit.Privilege)">preauthorize</A> in class <A HREF="../../../../glguerin/authkit/Authorization.html">Authorization</A></DL><P> <B>See Also:</B><A HREF="#authorize">authorize</A>, <A HREF="#getCapabilities">getCapabilities</A></BLOCKQUOTE> <BR><TABLE WIDTH=100% CELLSPACING=0 CELLPADDING=1 BORDER=0> <TR> <TD WIDTH=80%><BR><H3><A NAME="isAvailable"><FONT COLOR="#FF0000">&middot;</FONT></A><A NAME="isAvailable(glguerin.authkit.Privilege)">isAvailable</A> </H3></TD> <TD ALIGN=right WIDTH=20%> <FONT SIZE="-2"><A HREF="#_Summary_">Summary</A> &nbsp;|&nbsp; <A HREF=#_top_>Top</A></FONT> </TD> </TR> </TABLE><PRE>   public boolean isAvailable(<A HREF="../../../../glguerin/authkit/Privilege.html">Privilege</A> toCheck) </PRE><BLOCKQUOTE><DL><P>Is the given Privilege currently available (authorized, preauthorized, or implied)?<P><DT><B>Overrides:</B><DD><A HREF="../../../../glguerin/authkit/Authorization.html#isAvailable(glguerin.authkit.Privilege)">isAvailable</A> in class <A HREF="../../../../glguerin/authkit/Authorization.html">Authorization</A></DL></BLOCKQUOTE> <BR><TABLE WIDTH=100% CELLSPACING=0 CELLPADDING=1 BORDER=0> <TR> <TD WIDTH=80%><BR><H3><A NAME="detach"><FONT COLOR="#FF0000">&middot;</FONT></A><A NAME="detach(boolean)">detach</A> </H3></TD> <TD ALIGN=right WIDTH=20%> <FONT SIZE="-2"><A HREF="#_Summary_">Summary</A> &nbsp;|&nbsp; <A HREF=#_top_>Top</A></FONT> </TD> </TR> </TABLE><PRE>   public synchronized void detach(boolean revokeShared) </PRE><BLOCKQUOTE><DL><P>Detach this Authorization from any underlying session, acting on shared authorizations in the manner given by the boolean.<p> In this implementation, acquire this instance's lock for its own thread-safety in assigning a value to mySession.<P><DT><B>Overrides:</B><DD><A HREF="../../../../glguerin/authkit/Authorization.html#detach(boolean)">detach</A> in class <A HREF="../../../../glguerin/authkit/Authorization.html">Authorization</A></DL></BLOCKQUOTE> <BR><TABLE WIDTH=100% CELLSPACING=0 CELLPADDING=1 BORDER=0> <TR> <TD WIDTH=80%><BR><H3><A NAME="getPastGrantedPrivileges"><FONT COLOR="#FF0000">&middot;</FONT></A><A NAME="getPastGrantedPrivileges()">getPastGrantedPrivileges</A> </H3></TD> <TD ALIGN=right WIDTH=20%> <FONT SIZE="-2"><A HREF="#_Summary_">Summary</A> &nbsp;|&nbsp; <A HREF=#_top_>Top</A></FONT> </TD> </TR> </TABLE><PRE>   public Enumeration getPastGrantedPrivileges() </PRE><BLOCKQUOTE><DL><P>Return an Enumeration (possibly empty, but never null) representing all past Privileges granted by authorize() or preauthorize(). The Enumeration's nextElement() method returns a Privilege.<p> This method DOES NOT create a new session if one is not attached. This method never throws an UnauthorizedException.<P><DT><B>Overrides:</B><DD><A HREF="../../../../glguerin/authkit/Authorization.html#getPastGrantedPrivileges()">getPastGrantedPrivileges</A> in class <A HREF="../../../../glguerin/authkit/Authorization.html">Authorization</A></DL></BLOCKQUOTE> <BR><TABLE WIDTH=100% CELLSPACING=0 CELLPADDING=1 BORDER=0> <TR> <TD WIDTH=80%><BR><H3><A NAME="getPastGrantedDate"><FONT COLOR="#FF0000">&middot;</FONT></A><A NAME="getPastGrantedDate(glguerin.authkit.Privilege, int)">getPastGrantedDate</A> </H3></TD> <TD ALIGN=right WIDTH=20%> <FONT SIZE="-2"><A HREF="#_Summary_">Summary</A> &nbsp;|&nbsp; <A HREF=#_top_>Top</A></FONT> </TD> </TR> </TABLE><PRE>   public Date getPastGrantedDate(<A HREF="../../../../glguerin/authkit/Privilege.html">Privilege</A> privilege,                                   int when) </PRE><BLOCKQUOTE><DL><P>If the given Privilege was previously granted, return a Date representing the timestamp of when that last occurred.<P><DT> <B>Throws:</B> IllegalArgumentException<DD> thrown if 'when' is an invalid value.<DT><B>Overrides:</B><DD><A HREF="../../../../glguerin/authkit/Authorization.html#getPastGrantedDate(glguerin.authkit.Privilege, int)">getPastGrantedDate</A> in class <A HREF="../../../../glguerin/authkit/Authorization.html">Authorization</A></DL></BLOCKQUOTE> <BR><TABLE WIDTH=100% CELLSPACING=0 CELLPADDING=1 BORDER=0> <TR> <TD WIDTH=80%><BR><H3><A NAME="makeExecPrivilege"><FONT COLOR="#FF0000">&middot;</FONT></A><A NAME="makeExecPrivilege(java.lang.String)">makeExecPrivilege</A> </H3></TD> <TD ALIGN=right WIDTH=20%> <FONT SIZE="-2"><A HREF="#_Summary_">Summary</A> &nbsp;|&nbsp; <A HREF=#_top_>Top</A></FONT> </TD> </TR> </TABLE><PRE>   public <A HREF="../../../../glguerin/authkit/Privilege.html">Privilege</A> makeExecPrivilege(String cmdName) </PRE><BLOCKQUOTE><DL><P>Make and return a Privilege representing the ability to execute a program with elevated privileges by way of execPrivileged().<p> The name of the returned Privilege is "system.privilege.admin" (see "AuthorizationTags.h"). Its value is the UTF-8 encoding of the cmdName.<P><DT><B>Overrides:</B><DD><A HREF="../../../../glguerin/authkit/Authorization.html#makeExecPrivilege(java.lang.String)">makeExecPrivilege</A> in class <A HREF="../../../../glguerin/authkit/Authorization.html">Authorization</A></DL></BLOCKQUOTE> <BR><TABLE WIDTH=100% CELLSPACING=0 CELLPADDING=1 BORDER=0> <TR> <TD WIDTH=80%><BR><H3><A NAME="execPrivileged"><FONT COLOR="#FF0000">&middot;</FONT></A><A NAME="execPrivileged(java.lang.String[])">execPrivileged</A> </H3></TD> <TD ALIGN=right WIDTH=20%> <FONT SIZE="-2"><A HREF="#_Summary_">Summary</A> &nbsp;|&nbsp; <A HREF=#_top_>Top</A></FONT> </TD> </TR> </TABLE><PRE>   public Process execPrivileged(String[] progArray) </PRE><BLOCKQUOTE><DL><P>Execute a program as if run by a privileged user, or with temporarily elevated privileges. If the execution privilege is denied, an UnauthorizedException is thrown and no program is executed. If authorization succeeds, a Privilege is added to the past granted Privileges.<p> In this implementation, the program is run with an effective user-ID of root. The real user-ID, along with the real and effective group-ID's, are unchanged.<p> The program named in progArray[0] must be accessible to the current unprivileged user-ID. That is, the current process must have search-permission on all directories leading to the executable, and have execute-permission on the file itself. It isn't good enough if root has access, since the privileges are not elevated to root until AFTER the executable has been loaded into memory.<p> The program named in progArray[0] must be an absolute pathname. The PATH environment-variable is not used to search for a command, as it is for Runtime.exec(). This is done for security reasons, so an attacker can't forge or taint a PATH that would cause an unexpected program to run as root.<p> If no session is active, one is established first. If the necessary Privilege is not already available or preauthorized, an interactive dialog will be presented, blocking the current Thread. If your program absolutely cannot tolerate blocking the current Thread, then call this method on its own Thread, or arrange to preauthorize() or authorize() first, or qualify the call to this method with a call to isAvailable().<P><DT> <B>Throws:</B> <A HREF="../../../../glguerin/authkit/UnauthorizedException.html">UnauthorizedException</A><DD> thrown when the necessary Privilege is not available or preauthorized,   or the program is inaccessible, malformed, or otherwise unexecutable.<DT> <B>Throws:</B> IllegalArgumentException<DD> thrown when some malformation or structural error occurs.<DT><B>Overrides:</B><DD><A HREF="../../../../glguerin/authkit/Authorization.html#execPrivileged(java.lang.String[])">execPrivileged</A> in class <A HREF="../../../../glguerin/authkit/Authorization.html">Authorization</A></DL></BLOCKQUOTE> <BR><TABLE WIDTH=100% CELLSPACING=0 CELLPADDING=1 BORDER=0> <TR> <TD WIDTH=80%><BR><H3><A NAME="getSecretLength"><FONT COLOR="#FF0000">&middot;</FONT></A><A NAME="getSecretLength()">getSecretLength</A> </H3></TD> <TD ALIGN=right WIDTH=20%> <FONT SIZE="-2"><A HREF="#_Summary_">Summary</A> &nbsp;|&nbsp; <A HREF=#_top_>Top</A></FONT> </TD> </TR> </TABLE><PRE>   public int getSecretLength() </PRE><BLOCKQUOTE><DL><P>Return the required length of a buffer that can hold the secret session identifier.<p> This is the size in bytes of the AuthorizationExternalForm type defined by the Authorization Services API.<P><DT><B>Overrides:</B><DD><A HREF="../../../../glguerin/authkit/Authorization.html#getSecretLength()">getSecretLength</A> in class <A HREF="../../../../glguerin/authkit/Authorization.html">Authorization</A></DL></BLOCKQUOTE> <BR><TABLE WIDTH=100% CELLSPACING=0 CELLPADDING=1 BORDER=0> <TR> <TD WIDTH=80%><BR><H3><A NAME="getSecretIdentifier"><FONT COLOR="#FF0000">&middot;</FONT></A><A NAME="getSecretIdentifier()">getSecretIdentifier</A> </H3></TD> <TD ALIGN=right WIDTH=20%> <FONT SIZE="-2"><A HREF="#_Summary_">Summary</A> &nbsp;|&nbsp; <A HREF=#_top_>Top</A></FONT> </TD> </TR> </TABLE><PRE>   public synchronized byte[] getSecretIdentifier() </PRE><BLOCKQUOTE><DL><P>Return a secret session ID underlying this Authorization. If no session is active, one <b>IS NOT</b> established first, and a zero-length byte[] is returned. Otherwise the secret identifier is put into a new byte[], which is returned.<p> The returned secret identifier is identical with the AuthorizationExternalForm type defined by the Authorization Services API. Therefore, it can be sent to any other program that uses Authorization Services, and the available credentials and privileges will be shared.<P><DT> <B>Throws:</B> <A HREF="../../../../glguerin/authkit/UnauthorizedException.html">UnauthorizedException</A><DD> thrown when the secret identifier cannot be obtained.<DT> <B>Throws:</B> IllegalArgumentException<DD> thrown when something really bad or stupid happens.<DT><B>Overrides:</B><DD><A HREF="../../../../glguerin/authkit/Authorization.html#getSecretIdentifier()">getSecretIdentifier</A> in class <A HREF="../../../../glguerin/authkit/Authorization.html">Authorization</A></DL></BLOCKQUOTE> <BR><TABLE WIDTH=100% CELLSPACING=0 CELLPADDING=1 BORDER=0> <TR> <TD WIDTH=80%><BR><H3><A NAME="attach"><FONT COLOR="#FF0000">&middot;</FONT></A><A NAME="attach(byte[])">attach</A> </H3></TD> <TD ALIGN=right WIDTH=20%> <FONT SIZE="-2"><A HREF="#_Summary_">Summary</A> &nbsp;|&nbsp; <A HREF=#_top_>Top</A></FONT> </TD> </TR> </TABLE><PRE>   public synchronized void attach(byte[] secretIdentifier) </PRE><BLOCKQUOTE><DL><P>Attach this Authorization to the underlying session identified by the secret session identifier. This Authorization must be newly constructed or recently detach()'ed. The underlying session identified by the secretIdentifier must still be active (alive), or an UnauthorizedException will be thrown.<p> The supplied "secret identifier" is identical with the AuthorizationExternalForm type defined by the Authorization Services API. Therefor, any other program that uses Authorization Services can send those bytes to a Java program using a MacOSXAuthorization, and the Java program will have access to all the same credentials and privileges.<P><DT> <B>Throws:</B> <A HREF="../../../../glguerin/authkit/UnauthorizedException.html">UnauthorizedException</A><DD> thrown when the session identified by the secret cannot be attached because it has vanished.<DT> <B>Throws:</B> IllegalArgumentException<DD> thrown when some malformation or structural error occurs.<DT> <B>Throws:</B> IllegalStateException<DD> thrown when this Authorization already represents an active session.   That is, when this Authorization is not newly created or recently detach()'ed.<DT><B>Overrides:</B><DD><A HREF="../../../../glguerin/authkit/Authorization.html#attach(byte[])">attach</A> in class <A HREF="../../../../glguerin/authkit/Authorization.html">Authorization</A></DL></BLOCKQUOTE> <BR><TABLE WIDTH=100% CELLSPACING=0 CELLPADDING=1 BORDER=0> <TR> <TD WIDTH=80%><BR><H3><A NAME="attachPrivileged"><FONT COLOR="#FF0000">&middot;</FONT></A><A NAME="attachPrivileged()">attachPrivileged</A> </H3></TD> <TD ALIGN=right WIDTH=20%> <FONT SIZE="-2"><A HREF="#_Summary_">Summary</A> &nbsp;|&nbsp; <A HREF=#_top_>Top</A></FONT> </TD> </TR> </TABLE><PRE>   public synchronized void attachPrivileged() </PRE><BLOCKQUOTE><DL><P>Attach this Authorization to the same session used by execPrivileged() in the parent process. That session is only available to child processes executed by execPrivileged(), and needs no secret identifier. If the current process is not a child by execPrivileged(), then this method fails.<p> This implementation eventually calls the Authorization Services API function AuthorizationCopyPrivilegedReference(). Therefore, any other program that uses Authorization Services can execute a Java program using AuthorizationExecuteWithPrivileges(), and the privileged session will be available to the Java program after calling this method.<P><DT> <B>Throws:</B> <A HREF="../../../../glguerin/authkit/UnauthorizedException.html">UnauthorizedException</A><DD> thrown when there is no privileged session to attach to.<DT> <B>Throws:</B> IllegalArgumentException<DD> thrown when some malformation or structural error occurs.<DT> <B>Throws:</B> IllegalStateException<DD> thrown when this Authorization already represents an active session.   That is, when this Authorization is not newly created or recently detach()'ed.<DT><B>Overrides:</B><DD><A HREF="../../../../glguerin/authkit/Authorization.html#attachPrivileged()">attachPrivileged</A> in class <A HREF="../../../../glguerin/authkit/Authorization.html">Authorization</A></DL></BLOCKQUOTE> <BR><HR SIZE=1 ALIGN=left WIDTH="98%"><PRE><A HREF="../../../../packages.html">All Packages</A>  <A HREF="../../../../Package-glguerin/authkit/imp/macosx.html">This Package</A>  <A HREF="../../../../tree.html">Class Hierarchy</A>  <A HREF="../../../../Search.html">Class Search</A>  <A HREF="../../../../AllNames.html">Index</A></PRE><FONT FACE="Arial,Helvetica" SIZE=-2>Freshly brewed Java API Documentation automatically generated with <A HREF="http://www.ualberta.ca/~tgee/polardoc">polardoc</A> Version 1.0.7<BR></FONT></BODY></HTML>